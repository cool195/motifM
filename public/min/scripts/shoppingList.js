"use strict";!function(a,e){function t(e,t){h.slideTo(e,t,!1),u.slideTo(e,t,!1),a(h.slides).children("a").addClass("inactive"),a(h.slides[e]).children("a").removeClass("inactive")}function i(){var e=u.activeIndex,t=a(u.slides[e]);t.css({height:"auto"});var i=t.children(".container-fluid").height();console.info(i),t.siblings(".swiper-slide").height(i)}function n(e){a(u.slides[e]).find(".loading").show()}function s(e){a(u.slides[e]).find(".loading").hide()}function o(e){var t=u.activeIndex,i=a(u.slides[t]),o=a(h.slides[t]);if(1===e)var c=i.data("pagenum");else var c=0;if(c!==-1&&i.data("loading")!==!0){i.data("loading",!0);var d=++c,m=o.data("tab-index");n(t);var p;p=""!=r?"/products?extra_kv=sea:"+r:"/products",a.ajax({url:p,data:{pagenum:d,pagesize:20,cid:m}}).done(function(n){n.success&&(onImpressProduct(n.data.list),null===n.data||""===n.data||0===n.data.list.length?i.data("pagenum",-1):(l(n.data,t,e),i.data("pagenum",c),a.ajax({url:n.data.impr}),a("img.img-lazy").lazyload({threshold:200,container:a("#tabs-container"),effect:"fadeIn"}),a("[data-clk]").unbind("click"),a("[data-clk]").bind("click",function(){var e=a(this);a("#productClick-name").val(e.data("title")),a("#productClick-spu").val(e.data("spu")),a("#productClick-price").val(e.data("price")),onProductClick(),void 0!==e.data("link")&&(a.ajax({url:e.data("clk"),type:"GET"}),setTimeout(function(){window.location.href=e.data("link")},100))})))}).always(function(){s(t),i.data("loading",!1)})}}function c(){var e=location.hash;if(""!==e&&null!==e){e=e.substring(1);var i=a("#"+e).index();i>=0&&t(i,0)}}function d(){var e=window.pageYOffset,t=a(document).height()-a(window).height();e!==t&&t<=300+e&&o(1)}function l(e,t,i){var n=template("tpl-product",e),s=a.parseHTML(n);1===i?a(u.slides[t]).find(".row").append(s):2===i&&(a(".swiper-wrapper .productList").each(function(){a(this).html("")}),a(u.slides[t]).find(".row").html(s))}var r="",h=new e("#tabIndex-container",{freeMode:!0,slidesPerView:"auto",freeModeMomentumRatio:.5}),u=new e("#tabs-container",{onlyExternal:!0});a("#header").headroom({tolerance:.5,offset:44,classes:{top:"animated",notTop:"animated",bottom:"animated",notBottom:"animated",initial:"animated",pinned:"slideInDown",unpinned:"slideOutUp"}}),a("#tabIndex-container").headroom({tolerance:.5,offset:44,classes:{top:"animated",notTop:"animated",bottom:"animated",notBottom:"animated",initial:"animated",pinned:"tabIndexDown",unpinned:"tabIndexUp"}}),a("#tabIndex-container").on("click",".nav-item",function(){t(h.clickedIndex,500),o(1),i()});var m={hashTracking:!1};a("[data-remodal-id=download-modal]").remodal(m),function(){c(),o(1)}(),a("#tabIndex-container").find("li[data-tab-index]").one("click",function(){a("body").animate({scrollTop:0},200)}),a(document).ready(function(){a(window).scroll(function(){a("img.img-lazy").each(function(){var e=a(this).attr("src"),t=a(this).attr("data-original");e===t&&a(this).removeClass("img-lazy")}),d(),console.log("滚动条滚动")})}),a(".swiper-wrapper").on("click",".btn-wish",function(e){var t=a(e.target),i=a(e.target).data("spu");void 0!=i?(t.hasClass("active")?t.removeClass("active"):t.addClass("active"),a.ajax({url:"/updateWish",type:"post",data:{spu:i}})):(i=t.data("actionspu"),a.ajax({url:"/notesaction",type:"get",data:{action:"wish",spu:i}}).done(function(a){window.location.href="/login"}))}),a(".btn-search").on("click",function(){var e=52*a(".search-item").length+47;return a(".search-container").toggleClass("active"),a(".search-container").hasClass("active")?(a(".search-container").css("height",e),a(".search-container").css("opacity",1),a(".btn-search").html("CLOSE"),a(".swiper-slide-active").children(".container-fluid").addClass("search-mask")):(a(".search-container").css("height",0),a(".search-container").css("opacity",0),a(".btn-search").html("SORT BY"),a(".swiper-slide-active").children(".container-fluid").removeClass("search-mask")),a("body,html").animate({scrollTop:0},0),!1}),a(".search-item").on("click",function(){a(".search-item").removeClass("active"),a(this).addClass("active"),a(".search-container").toggleClass("active"),a(".search-container").css("height",0),a(".btn-search").html("SORT BY"),a(".swiper-slide-active").children(".container-fluid").removeClass("search-mask"),r=a(this).data("search"),a(".lowTo-info").html(a(this).data("searchtext")),a(".lowTo").removeClass("disabled"),a("[data-pagenum]").each(function(){a(this).data("pagenum",0)}),o(2)}),a("#searchReset").on("click",function(){a(".search-item").removeClass("active"),a(".search-container").toggleClass("active"),a(".search-container").css("height",0),a(".btn-search").html("SORT BY"),a(".swiper-slide-active").children(".container-fluid").removeClass("search-mask"),r="",a(".lowTo-info").html(r),a(".lowTo").addClass("disabled"),a("[data-pagenum]").each(function(){a(this).data("pagenum",0)}),o(2)})}(jQuery,Swiper);