"use strict";!function(a){function t(){a(".loading").toggleClass("loading-hidden"),setTimeout(function(){a(".loading").toggleClass("loading-open")},25)}function o(){a(".loading").addClass("loading-close"),setTimeout(function(){a(".loading").toggleClass("loading-hidden loading-open").removeClass("loading-close")},500)}function n(){onRemoveFromCart();var n=a("#cartDialog").data("sku"),e=a("#cartDialog").data("action");return void 0===n||void 0===e||""===n||""===e||null===n||null===e?void console.log("sku||action 为空"):(t(),void a.ajax({url:"/cart/operate",type:"POST",data:{cmd:e,sku:n}}).done(function(a){a.success&&(console.log("success"),location.reload())}).fail(function(){console.log("error")}).always(function(){o(),console.log("complete")}))}function e(n,e){return void 0===e||void 0===n||""===e||""===n||null===e||null===n?void console.log("sku||action 为空"):(t(),void a.ajax({url:"/cart/operate",type:"POST",data:{cmd:n,sku:e}}).done(function(a){console.log("success"),a.success&&location.reload()}).fail(function(){console.log("error")}).always(function(){o(),console.log("complete")}))}function l(n,e,l){t(),a.ajax({url:"/cart/alterQtty",type:"POST",data:{sku:n,qtty:e}}).done(function(a){a.success&&(location.reload(),l.siblings("[data-count]").html(e))}).fail(function(){console.log("error")}).always(function(){console.log("complete"),o()})}a("img.img-lazy").lazyload({threshold:200,effect:"fadeIn"}),a(".item-count").on("click","[data-item]",function(t){var o;if(o="I"===a(t.target)[0].tagName?a(t.target).parents(".btn-cartCount"):a(t.target),!o.hasClass("disabled")){var n=parseInt(o.siblings("[data-count]").html()),e=a(t.target).parents(".item-count").data("sku"),i=n;"add"===o.data("item")?i++:i--,l(e,i,o)}}),a('[data-remodal-target="modal"]').click(function(t){a("#cartDialog").data("sku",a(t.target).data("sku")),a("#cartDialog").data("action",a(t.target).data("action")),a("#removeFromCart-name").val(a(this).data("title")),a("#removeFromCart-spu").val(a(this).data("spu")),a("#removeFromCart-price").val(a(this).data("price")),a("#removeFromCart-quantity").val(a(this).data("qtty")),console.log("open")}),a("#cartDialog").remodal({closeOnOutsideClick:!1,hashTracking:!1}),a("#cartDialog").on("closed",function(){a(this).removeData("sku").removeData("action"),console.log("close")}),a("#cartDialog").on("confirmation",function(){n()}),a("[data-product-move]").on("click",function(){var t=a(this).data("product-move"),o=a(this).data("sku");e(t,o)}),a("[data-item-qty]").on("click",function(t){var o;if(o="I"===a(t.target)[0].tagName?a(t.target).parents(".btn-cartCount"):a(t.target),!o.hasClass("disabled")){var n=o.parents(".btn-group").data("sku"),e=o.siblings("[data-item-num]").data("item-num");"add"===o.data("item-qty")?e++:e--,l(n,e)}})}(jQuery);