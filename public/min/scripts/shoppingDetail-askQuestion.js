"use strict";!function(a){function e(){a(".loading").toggleClass("loading-hidden"),setTimeout(function(){a(".loading").toggleClass("loading-open")},25)}function n(){a(".loading").addClass("loading-close"),setTimeout(function(){a(".loading").toggleClass("loading-hidden loading-open").removeClass("loading-close")},500)}function i(i){e(),a.ajax({url:"/askshopping",type:"PUT",data:a("#form-askQuestion").serialize()}).done(function(e){if(e.success){l.open();var n=e.redirectUrl;a("#confirmQuestion").attr("href",n)}else a(".warning-info").removeClass("hidden-xs-up"),a(".warning-info").children("span").text(e.prompt_msg)}).always(function(){n()})}function t(e){var n="Please enter your email",i="Please enter a valid email address",t=a(".warning-info"),s=e,l=/^[a-z0-9]([a-z0-9]*[-_]?[a-z0-9]+)*@([a-z0-9]*[-_]?[a-z0-9]+)+[\.][a-z]{2,3}([\.][a-z]{2})?$/i;return""===s?(t.removeClass("off"),t.children("span").html(n),a('div[data-role="submit"]').addClass("disabled"),!1):l.test(s)?(t.addClass("off"),a('div[data-role="submit"]').removeClass("disabled"),!0):(t.removeClass("off"),t.children("span").html(i),a('div[data-role="submit"]').addClass("disabled"),!1)}function s(e){var n="Please fill out all fieldes",i=a(".warning-info");return""===e?(a('div[data-role="submit"]').addClass("disabled"),i.removeClass("off"),i.children("span").html(n),!1):(i.addClass("off"),a('div[data-role="submit"]').removeClass("disabled"),!0)}a("#content").keyup(function(){var e=a("#content").data("length"),n=a("#content").val(),i=n.length;i<=e?a("#wordNum").html(i):(a(this).val(n.substring(0,e)),a("#wordNum").html(e))}),a('input[name="email"]').on("keyup",function(){var e=a(this).val();t(e)}),a('textarea[name="content"]').on("keyup",function(){var e=a(this).val();s(e)}),a('div[data-role="submit"]').on("click",function(e){var n=a('input[name="email"]').val(),l=a('textarea[name="content"]').val();if(!t(n))return void a(e.target).addClass("disabled");if(!s(l))return void a(e.target).addClass("disabled");var o=a(this).data("spu");i(o)}),a('div[data-role="cancel"]').on("click",function(){window.history.back(-1)});var l=a("#askQuestion").remodal({closeOnOutsideClick:!1,hashTracking:!1})}(jQuery);