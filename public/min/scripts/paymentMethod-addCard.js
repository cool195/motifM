"use strict";!function(n){function a(){n("#success").toggleClass("loading-hidden"),setTimeout(function(){n("#success").toggleClass("loading-open")},25)}function e(){n("#loading").toggleClass("loading-hidden"),setTimeout(function(){n("#loading").toggleClass("loading-open")},25)}function i(){n("#loading").addClass("loading-close"),setTimeout(function(){n("#loading").toggleClass("loading-hidden loading-open").removeClass("loading-close")},500)}function t(a){var e=n("#card-type"),i=a.val(),t=getCardTypes(i);""===i?e.attr("class","card-image"):0!==t.length?(e.hasClass(t)||(e.attr("class","card-image"),e.addClass(t[0].type)),a.removeClass("text-warning")):a.addClass("text-warning")}function o(){var a=!0;return n("input[data-optional]").each(function(){if(""===n(this).val())return a=n(this),!1}),a}var s=n("#card-container").data("token"),d=n(".warning-info"),l={};braintree.setup(s,"custom",{id:"card-container",onReady:function(n){l=n},onError:function(n){"VALIDATION"===n.type&&(d.children("span").html(n.message),d.removeClass("off"))},onPaymentMethodReceived:function(t){e(),n.ajax({url:"/braintree",type:"POST",data:{nonce:t.nonce}}).done(function(e){if(e.success){n(".warning-info").addClass("off"),a();var i=n("#infoForm");0===i.length?setTimeout(function(){window.location.href=e.redirectUrl},1500):setTimeout(function(){i.submit()},1500)}else n(".warning-info").removeClass("off"),n(".warning-info").children("span").text(e.prompt_msg)}).fail(function(){}).always(function(){i()})}}),n("#cardNum").on("keyup",function(){t(n(this))}),n("input[data-optional]").on("keyup",function(){var a=o();a===!0?(n(".warning-info").addClass("hidden-xs-up"),n('input[type="submit"]').removeClass("disabled").removeAttr("disabled")):(n(".warning-info").removeClass("hidden-xs-up"),n('input[type="submit"]').addClass("disabled").attr("disabled","disabled"))})}(jQuery);