"use strict";!function(a){function t(){a("#dailyContainer").find(".loading").show()}function n(){a("#dailyContainer").find(".loading").hide()}function i(){var i=a("#dailyContainer"),e=i.data("pagenum");if(e!==-1&&i.data("loading")!==!0){i.data("loading",!0);var o=++e;t(),a.ajax({url:"/trending",data:{cmd:"list",pagenum:o,pagesize:10,puton:a("#puton").val()}}).done(function(t){if(null===t.data||""===t.data)i.data("pagenum",-1);else if(null===t.data.list||""===t.data.list||void 0===t.data.list)i.data("pagenum",-1);else{d("tpl-daily",t.data);var n=9/16,o=a(window).width(),l=o*n;a(".ytplayer").length>0&&a(".designer-media").css("height",l),r("https://www.youtube.com/player_api",function(){setTimeout(function(){c()},1e3)}),i.data("pagenum",e),a("img.img-lazy").lazyload({threshold:200,container:a("#dailyContainer"),effect:"fadeIn"}),a("[data-clk]").unbind("click"),a("[data-clk]").bind("click",function(){var t=a(this);void 0!==t.data("link")&&(a.ajax({url:t.data("clk"),type:"GET"}),setTimeout(function(){window.location.href=t.data("link")},100))})}}).always(function(){i.data("loading",!1),n()})}}function e(a){a.children(".bg-player").css("display","none")}function o(t){var n=a(window).scrollTop()+a(window).height(),i=a(t).offset().top,e=i+a(t).height();return i>n||e<a(window).scrollTop()}function d(t,n){var i=template(t,n),e=a.parseHTML(i);a(".daily-content").append(e)}function l(){var t=window.pageYOffset,n=a(document).height()-a(window).height();t!==n&n<=300+t&&i()}function r(a,t){var n=document.createElement("script");n.src=a;var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(n,i),t()}function c(){var t=a(".player-item");0!==t.length&&a.each(t,function(t,n){if(!o(n)&&!a(n).hasClass("active")){var i=a(n),d=i.data("playid");"undefined"!=typeof YT&&"undefined"!=typeof YT.Player&&(player=new YT.Player(d,{height:MediaHeight,width:Width,videoId:d,playerVars:{autoplay:1,controls:2,showinfo:0,rel:0},events:{onReady:e(i)}})),a(this).addClass("active")}})}a(document).ready(function(){i(),a(window).scroll(function(){a("img.img-lazy").each(function(){var t=a(this).attr("src"),n=a(this).attr("data-original");t===n&&a(this).removeClass("img-lazy")}),l()})}),r("https://www.youtube.com/player_api",function(){c()})}(jQuery);