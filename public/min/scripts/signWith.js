!function(){function e(){$(".loading").toggleClass("loading-hidden"),setTimeout(function(){$(".loading").toggleClass("loading-open")},25)}function o(e){console.log(e.id),l.attachClickHandler(e,{},function(e){var o=e.getBasicProfile();$.ajax({url:"/googlelogin",type:"POST",data:{email:o.getEmail(),id:o.getId(),name:o.getName(),avatar:o.getImageUrl(),referer:$('[name="referer"]').val()}}).done(function(e){console.log("success"),e.success?window.location.href=e.redirectUrl:($(".warning-info").removeClass("off"),$(".warning-info").children("span").html(e.prompt_msg))}).fail(function(){console.log("error")}).always(function(){console.log("complete")})},function(e){console.error(JSON.stringify(e,void 0,2))})}function n(e){console.log("statusChangeCallback"),console.log(e),"connected"===e.status?i():"not_authorized"===e.status}function i(){FB.api("/me","GET",{fields:"id,name,picture.width(750).height(750),email"},function(e){""==e.email||void 0==e.email?$.ajax({url:"/facebookstatus/"+e.id,type:"get"}).done(function(o){o.status?(e.email=o.data.email,e.referer=$('[name="referer"]').val(),a(e)):window.location.href="/addFacebookEmail?id="+e.id+"&name="+e.name}):(e.referer=$('[name="referer"]').val(),a(e))})}function a(e){$.ajax({url:"/facebooklogin",type:"POST",data:{email:e.email,id:e.id,name:e.name,avatar:e.picture.data.url,referer:e.referer}}).done(function(e){e.success?window.location.href=e.redirectUrl:($(".warning-info").removeClass("off"),$(".warning-info").children("span").html(e.prompt_msg))})}var t="21307862595-iabkmrtg7r2ioq6qmu1e81de66thp4p2.apps.googleusercontent.com",l={},c=function(){gapi.load("auth2",function(){l=gapi.auth2.init({client_id:t,cookiepolicy:"single_host_origin"}),o(document.getElementById("googleLogin"))})};c(),window.fbAsyncInit=function(){FB.init({appId:"270298046670851",cookie:!1,status:!1,xfbml:!1,logging:!1,frictionlessRequests:!0,oauth:!0,version:"v2.6"})},function(e,o,n){var i,a=e.getElementsByTagName(o)[0];e.getElementById(n)||(i=e.createElement(o),i.id=n,i.src="//connect.facebook.net/en_US/sdk.js",a.parentNode.insertBefore(i,a))}(document,"script","facebook-jssdk"),$("#facebookLogin").click(function(){e(),FB.login(function(e){n(e)},{scope:"public_profile,email"})}),$("#googleLogin").click(function(){e()})}();