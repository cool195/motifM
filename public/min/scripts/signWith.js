!function(){function e(){$(".loading").toggleClass("loading-hidden"),setTimeout(function(){$(".loading").toggleClass("loading-open")},25)}function n(e){r.attachClickHandler(e,{},function(e){var n=e.getBasicProfile();$.ajax({url:"/googlelogin",type:"POST",data:{email:n.getEmail(),id:n.getId(),name:n.getName(),avatar:n.getImageUrl(),referer:$('[name="referer"]').val()}}).done(function(e){e.success?window.location.href=e.redirectUrl:($(".warning-info").removeClass("off"),$(".warning-info").children("span").html(e.prompt_msg))}).fail(function(){console.log("error")}).always(function(){console.log("complete")})},function(e){console.error(JSON.stringify(e,void 0,2))})}function o(e){"connected"===e.status?i():"not_authorized"===e.status}function i(){FB.api("/me","GET",{fields:"id,name,picture.width(750).height(750),email"},function(e){""==e.email||void 0==e.email?$.ajax({url:"/facebookstatus/"+e.id,type:"get"}).done(function(n){n.status?(e.email=n.data.email,e.referer=$('[name="referer"]').val(),t(e)):window.location.href="/addFacebookEmail?id="+e.id+"&name="+e.name}):(e.referer=$('[name="referer"]').val(),t(e))})}function t(e){$.ajax({url:"/facebooklogin",type:"POST",data:{email:e.email,id:e.id,name:e.name,avatar:e.picture.data.url,referer:e.referer}}).done(function(e){e.success?window.location.href=e.redirectUrl:($(".warning-info").removeClass("off"),$(".warning-info").children("span").html(e.prompt_msg))})}var a="21307862595-iabkmrtg7r2ioq6qmu1e81de66thp4p2.apps.googleusercontent.com",r={},l=function(){gapi.load("auth2",function(){r=gapi.auth2.init({client_id:a,cookiepolicy:"single_host_origin"}),n(document.getElementById("googleLogin"))})};l(),window.fbAsyncInit=function(){FB.init({appId:"270298046670851",cookie:!1,status:!1,xfbml:!1,logging:!1,frictionlessRequests:!0,oauth:!0,version:"v2.6"})},function(e,n,o){var i,t=e.getElementsByTagName(n)[0];e.getElementById(o)||(i=e.createElement(n),i.id=o,i.src="//connect.facebook.net/en_US/sdk.js",t.parentNode.insertBefore(i,t))}(document,"script","facebook-jssdk"),$("#facebookLogin").click(function(){e(),FB.login(function(e){o(e)},{scope:"public_profile,email"})}),$("#googleLogin").click(function(){e()})}();