"use strict";!function(a){function e(){a(".loading").toggleClass("loading-hidden"),setTimeout(function(){a(".loading").toggleClass("loading-open")},25)}function s(){a(".loading").addClass("loading-close"),setTimeout(function(){a(".loading").toggleClass("loading-hidden loading-open").removeClass("loading-close")},500)}function t(e){var s="Please enter your email",t="Please enter a valid email address",i=a(".warning-info"),n=e,l=/^[a-z0-9]([a-z0-9]*[-_]?[a-z0-9]+)*@([a-z0-9]*[-_]?[a-z0-9]+)+[\.][a-z]{2,3}([\.][a-z]{2})?$/i;return""===n?(i.removeClass("off"),i.children("span").html(s),a('div[data-role="submit"]').addClass("disabled"),!1):l.test(n)?(i.addClass("off"),a('div[data-role="submit"]').removeClass("disabled"),!0):(i.removeClass("off"),i.children("span").html(t),a('div[data-role="submit"]').addClass("disabled"),!1)}function i(e){var s="Please fill out all fieldes",t=a(".warning-info");return""===e?(a('div[data-role="submit"]').addClass("disabled"),t.removeClass("off"),t.children("span").html(s),!1):(t.addClass("off"),a('div[data-role="submit"]').removeClass("disabled"),!0)}function n(){var e="Please fill out all fieldes",s=a(".message-type").data("stype"),t=a(".warning-info");return 0===s||""===s||null===s?(a('div[data-role="submit"]').addClass("disabled"),t.removeClass("off"),t.children("span").html(e),!1):(t.addClass("off"),a('div[data-role="submit"]').removeClass("disabled"),!0)}function l(){e();var t=a("#email").val(),i=a("#content").val(),n=a(".message-type").data("type"),l=a(".message-type").data("stype");a.ajax({url:"/feedback",type:"GET",data:{email:t,content:i,type:n,stype:l}}).done(function(e){if(e.success){o.open();var s=e.redirectUrl;a("#confirmQuestion").attr("href",s)}}).always(function(){s()})}a('input[name="email"]').on("keyup",function(){var e=a(this).val();t(e)}),a('textarea[name="content"]').on("keyup",function(){var e=a(this).val();i(e)}),a('div[data-role="submit"]').on("click",function(e){var s=a('input[name="email"]').val(),o=a('textarea[name="content"]').val();return n()&&t(s)&&i(o)?void l():void a(e.target).addClass("disabled")}),a("#content").keyup(function(){var e=a("#content").data("length"),s=a("#content").val(),t=s.length;t<=e?a("#wordNum").html(t):(a(this).val(s.substring(0,e)),a("#wordNum").html(e))}),a(".btn-massageType").on("click",function(){a(this).siblings(".messageType-list").toggleClass("active"),a(this).siblings(".messageType-list").hasClass("active")?a(this).find(".iconfont").removeClass("icon-arrow-bottom").addClass("icon-arrow-up"):a(".btn-massageType").find("i").removeClass("icon-arrow-up").addClass("icon-arrow-bottom")}),a(".message-item").on("click",function(e){var s=a(e.target).html(),t=a(e.target).data("message-stype");a(this).parent().removeClass("active"),a(this).addClass("active").siblings().removeClass("active"),a(".btn-massageType").find("span").html(s),a(".btn-massageType").find("i").removeClass("icon-arrow-up").addClass("icon-arrow-bottom"),a(".message-type").data("stype",t),n()}),a('div[data-role="cancel"]').on("click",function(){window.history.back(-1)});var o=a("#askQuestion").remodal({closeOnOutsideClick:!1,hashTracking:!1})}(jQuery);