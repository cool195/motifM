"use strict";!function(a,t){function e(){a(".loading").show()}function i(){a(".loading").hide()}function n(n){var s=a("#productList-container"),r=20;if(s.data("loading")!==!0){if(s.data("loading",!0),1===n)var l=s.data("pagenum");else var l=0;if(l!==-1){var u=++l,p=a(".search-item.active").data("categoryid");e();var m,g;g="eprodlist"==a('input[name="cmd"]').val()?"/designer/editlist":"/designer/editget",m=""!=d?g+"?extra_kv=sea:&sort="+d:""!=c?g+"?extra_kv=sea:&sort"+c:g,a.ajax({url:m,data:{pagenum:u,pagesize:r,cid:p}}).done(function(e){if(e.success)if(null===e.data||""===e.data||0===e.data.list.length)s.data("pagenum",-1);else{o(e.data,n),s.data("pagenum",u),"eprodget"==a('input[name="cmd"]').val()&&s.data("pagenum",-1),a.ajax({url:e.data.impr}),a("img.img-lazy").lazyload({threshold:200,container:a("#productList-container"),effect:"fadeIn"});new t(".swiper-container",{pagination:".swiper-pagination",paginationClickable:!0,paginationType:"bullets",lazyLoading:!0,lazyLoadingInPrevNext:!0,onSlideChangeStart:function(t){a(t.bullets).css("opacity","0.6"),setTimeout(function(){a(t.bullets).css("opacity","0")},2e3)}});a("[data-clk]").unbind("click"),a("[data-clk]").bind("click",function(){var t=a(this);a("#productClick-name").val(t.data("title")),a("#productClick-spu").val(t.data("spu")),a("#productClick-price").val(t.data("price")),void 0!==t.data("link")&&(a.ajax({url:t.data("clk"),type:"GET"}),setTimeout(function(){window.location.href=t.data("link")},100))})}}).always(function(){i(),s.data("loading",!1),a(".productList-item").length<=0&&a("#emptySaveList").removeClass("hidden-xs-up")})}}}function o(t,e){var i=template("tpl-product-redsquare",t),n=a.parseHTML(i);1===e?a("#productList-container").find(".row").append(n):2===e&&(a(".productList").each(function(){a(this).html("")}),a("#productList-container").find(".row").html(n))}function s(){var t=window.pageYOffset,e=a(document).height()-a(window).height();t!==e&&e<=300+t&&n(1)}var d="",r=0;a("#header").headroom({tolerance:.5,offset:44,classes:{top:"animated",notTop:"animated",bottom:"animated",notBottom:"animated",initial:"animated",pinned:"slideInDown",unpinned:"slideOutUp"}}),a("#tabIndex-container").headroom({tolerance:.5,offset:44,classes:{top:"animated",notTop:"animated",bottom:"animated",notBottom:"animated",initial:"animated",pinned:"tabIndexDown",unpinned:"tabIndexUp"}}),a("#nav-categoryTit").on("click",function(){var t=a(".search-container");return t.toggleClass("active"),a(this).toggleClass("active"),t.hasClass("active")?(t.slideDown("fast"),a("#productList-container").addClass("dark-mask"),a(".nav-category .titDiv").addClass("border-b")):(t.slideUp("fast"),a("#productList-container").removeClass("dark-mask"),a(".nav-category .titDiv").removeClass("border-b")),!1}),a(".search-item").on("click",function(){a(".search-item").removeClass("active"),a(this).addClass("active"),a(".search-container").toggleClass("active"),a("#nav-categoryTit").toggleClass("active"),a(".search-container").slideUp("fast"),a("#productList-container").removeClass("dark-mask"),a(".nav-category .titDiv").removeClass("border-b"),r=a(this).data("categoryid"),a("#productList-container").data("pagenum",0),a("#productList-container").data("loading",!1),a("#nav-categoryTit").html(a(this).data("categoryname")),n(2)});var c;!function(){c=location.hash.substring(1);var t=!1,e="",i=0;a.each(a("[data-search]"),function(n,o){if(a(this).data("search")===parseInt(c))return t=!0,e=a(this).data("searchtext"),i=n+1,!1}),t||(c=""),""!=c?(a("#productList-container").data("pagenum",0),a("#productList-container").data("loading",!1),a("#sortBy option:eq("+i+")").attr("selected","selected"),a(".lowTo-info").html(e),a(".lowTo").removeClass("disabled"),n(2)):n(1)}(),a(".btn-sortBy").on("change",function(){var t=a(".btn-sortBy option:selected");"reset"==t.data("searchtext")?(d="",a(".lowTo-info").html(d),a(".lowTo").addClass("disabled")):(d=t.data("search"),a(".lowTo-info").html(t.data("searchtext")),a(".lowTo").removeClass("disabled")),a("#productList-container").data("pagenum",0),a("#productList-container").data("loading",!1),n(2)}),a(document).ready(function(){a(window).scroll(function(){a("img.img-lazy").each(function(){var t=a(this).attr("src"),e=a(this).attr("data-original");t===e&&a(this).removeClass("img-lazy")}),s()})})}(jQuery,Swiper);