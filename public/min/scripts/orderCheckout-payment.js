"use strict";!function(a){function t(t){t.hasClass("active")?(t.html("Edit"),t.toggleClass("active"),t.addClass("btn-primary-outline").removeClass("btn-primary"),a('div[data-role="submit"]').removeClass("hidden")):(t.html("Done"),t.toggleClass("active"),t.addClass("btn-primary").removeClass("btn-primary-outline"),a('div[data-role="submit"]').addClass("hidden"))}function n(t){var n=a(".payment-info").find(".iconfont");t.hasClass("active")?n.addClass("icon-radio"):n.removeClass("icon-radio")}function e(t){var n=a(".payment-info");t.hasClass("active")?a.each(n,function(t,n){var e=a(n).data("url-return");a(n).attr("href",e)}):a.each(n,function(t,n){var e=a(n).data("url-edit");a(n).attr("href",e)})}function o(){a(".loading").toggleClass("loading-hidden"),setTimeout(function(){a(".loading").toggleClass("loading-open")},25)}function i(){a(".loading").addClass("loading-close"),setTimeout(function(){a(".loading").toggleClass("loading-hidden loading-open").removeClass("loading-close")},500)}function r(t){o(),a.ajax({url:" /braintree",type:"DELETE",data:{methodtoken:t}}).done(function(t){t.success&&(a("#infoForm").attr("action",t.redirectUrl),a("#infoForm").submit())})}a("#payment-edit").on("click",function(o){n(a(o.target)),e(a(o.target)),t(a(o.target)),a(".payment-delete").toggleClass("switch")}),a('[data-role="submit"]').on("click",function(){var t=a(".icon-radio.active").parents(".payment-info").data("type"),n=a(".icon-radio.active").parents(".payment-info").data("token"),e=a(".icon-radio.active").parents(".payment-info").data("cardtype"),o=a(".icon-radio.active").parents(".payment-info").data("showname");a('input[name="methodToken"]').val(n),a('input[name="cardType"]').val(e),a('input[name="showName"]').val(o),a('input[name="paym"]').val(t),a("#infoForm").submit()}),a(".payment-delete").on("click",function(t){var n=a(t.target).parents(".payment-item").data("token");a("#modalDialog").data("token",n)}),a(".payment-info").on("click",function(){var t=a(this).parents(".payment-item").data("token");a(".icon-radio.active").removeClass("active"),a(this).find(".icon-radio").addClass("active"),a('input[name="methodtoken"]').val(t)}),a("#modalDialog").remodal({closeOnOutsideClick:!1,hashTracking:!1}),a("#modalDialog").on("closed",function(){a(this).removeData("token")}),a("#modalDialog").on("confirmation",function(){var t=a(this).data("token");void 0!==t&&null!==t&&""!==t&&r(t)});var l=a("#paypal").data("braintree"),c={};""!==l&&void 0!==l&&braintree.setup(l,"custom",{paypal:{currency:"USD",locale:"en_us",headless:!0},onReady:function(a){c=a},onPaymentMethodReceived:function(t){o(),a.ajax({url:"/braintree",type:"POST",data:{nonce:t.nonce}}).done(function(t){t.success&&(a("#infoForm").attr("action",t.redirectUrl),a("#infoForm").submit())}).always(function(){i()})}}),a("#paypal").on("click",function(a){a.preventDefault(),c.paypal.initAuthFlow()}),a("#cardCredit").on("click",function(t){t.preventDefault(),a("#infoForm").attr("action",a(this).data("action")),a("#infoForm").submit()})}(jQuery);