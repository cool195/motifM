"use strict";!function(a){function i(i){i.hasClass("active")?(i.html("Edit"),i.toggleClass("active"),i.addClass("btn-primary-outline").removeClass("btn-primary"),a('div[data-role="submit"]').removeClass("hidden")):(i.html("Done"),i.toggleClass("active"),i.addClass("btn-primary").removeClass("btn-primary-outline"),a('div[data-role="submit"]').addClass("hidden"))}function t(i){var t=a(".addressItem-info").find(".iconfont");i.hasClass("active")?t.removeClass("icon-arrow-right").addClass("icon-radio"):t.removeClass("icon-radio").addClass("icon-arrow-right")}function o(i){var t=a(".addressItem-info");i.hasClass("active")?a.each(t,function(i,t){var o=a(t).data("url-return");a(t).data("action",o)}):a.each(t,function(i,t){var o=a(t).data("url-edit");a(t).data("action",o)})}function n(){a(".loading").toggleClass("loading-hidden"),setTimeout(function(){a(".loading").toggleClass("loading-open")},25)}function d(){a(".loading").addClass("loading-close"),setTimeout(function(){a(".loading").toggleClass("loading-hidden loading-open").removeClass("loading-close")},500)}function s(i){n(),a.ajax({url:"/addresses",type:"DELETE",data:{aid:i}}).done(function(){location.reload()}).always(function(){d()})}a("#address-edit").on("click",function(n){t(a(n.target)),o(a(n.target)),i(a(n.target)),a(".addressList-delete").toggleClass("switch")}),a('[data-role="submit"]').on("click",function(){var i=a(this).data("action");a("#infoForm").attr("action",i),a("#infoForm").submit()}),a('[data-role="add"]').on("click",function(){var i=a(this).data("action");a("#infoForm").attr("action",i),a("#infoForm").submit()}),a(".addressList-delete").on("click",function(i){var t=a(i.target).parents(".addressList-container").data("address");a("#modalDialog").data("address",t)}),a(".addressItem-info").on("click",function(){var i=a(this).data("action"),t=a(this).parents(".addressList-container").data("address");if("return"===i)a(".icon-radio.active").removeClass("active"),a(this).find(".icon-radio").addClass("active"),a('input[name="aid"]').val(t);else if("edit"===i){a('input[name="eid"]').val(t);var o=a("#infoForm");o.attr("action","/cart/addrmod"),o.submit()}}),a("#modalDialog").remodal({closeOnOutsideClick:!1,hashTracking:!1}),a("#modalDialog").on("closed",function(){a(this).removeData("address")}),a("#modalDialog").on("confirmation",function(){var i=a("#modalDialog").data("address");void 0!==i&&null!==i&&""!==i&&s(i)})}(jQuery);